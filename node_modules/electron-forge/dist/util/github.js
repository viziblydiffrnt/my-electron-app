'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _github = require('github');

var _github2 = _interopRequireDefault(_github);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var GitHub = function () {
  function GitHub(authToken, requireAuth) {
    (0, _classCallCheck3.default)(this, GitHub);

    if (authToken) {
      this.token = authToken;
    } else if (process.env.GITHUB_TOKEN) {
      this.token = process.env.GITHUB_TOKEN;
    } else if (requireAuth) {
      throw 'Please set GITHUB_TOKEN in your environment to access these features';
    }
  }

  (0, _createClass3.default)(GitHub, [{
    key: 'getGitHub',
    value: function getGitHub() {
      var github = new _github2.default({
        protocol: 'https',
        headers: {
          'user-agent': 'Electron Forge'
        }
      });
      if (this.token) {
        github.authenticate({
          type: 'token',
          token: this.token
        });
      }
      return github;
    }
  }]);
  return GitHub;
}();

exports.default = GitHub;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwvZ2l0aHViLmpzIl0sIm5hbWVzIjpbIkdpdEh1YiIsImF1dGhUb2tlbiIsInJlcXVpcmVBdXRoIiwidG9rZW4iLCJwcm9jZXNzIiwiZW52IiwiR0lUSFVCX1RPS0VOIiwiZ2l0aHViIiwicHJvdG9jb2wiLCJoZWFkZXJzIiwiYXV0aGVudGljYXRlIiwidHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0lBRXFCQSxNO0FBQ25CLGtCQUFZQyxTQUFaLEVBQXVCQyxXQUF2QixFQUFvQztBQUFBOztBQUNsQyxRQUFJRCxTQUFKLEVBQWU7QUFDYixXQUFLRSxLQUFMLEdBQWFGLFNBQWI7QUFDRCxLQUZELE1BRU8sSUFBSUcsUUFBUUMsR0FBUixDQUFZQyxZQUFoQixFQUE4QjtBQUNuQyxXQUFLSCxLQUFMLEdBQWFDLFFBQVFDLEdBQVIsQ0FBWUMsWUFBekI7QUFDRCxLQUZNLE1BRUEsSUFBSUosV0FBSixFQUFpQjtBQUN0QixZQUFNLHNFQUFOO0FBQ0Q7QUFDRjs7OztnQ0FFVztBQUNWLFVBQU1LLFNBQVMscUJBQWM7QUFDM0JDLGtCQUFVLE9BRGlCO0FBRTNCQyxpQkFBUztBQUNQLHdCQUFjO0FBRFA7QUFGa0IsT0FBZCxDQUFmO0FBTUEsVUFBSSxLQUFLTixLQUFULEVBQWdCO0FBQ2RJLGVBQU9HLFlBQVAsQ0FBb0I7QUFDbEJDLGdCQUFNLE9BRFk7QUFFbEJSLGlCQUFPLEtBQUtBO0FBRk0sU0FBcEI7QUFJRDtBQUNELGFBQU9JLE1BQVA7QUFDRDs7Ozs7a0JBekJrQlAsTSIsImZpbGUiOiJ1dGlsL2dpdGh1Yi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHaXRIdWJBUEkgZnJvbSAnZ2l0aHViJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2l0SHViIHtcbiAgY29uc3RydWN0b3IoYXV0aFRva2VuLCByZXF1aXJlQXV0aCkge1xuICAgIGlmIChhdXRoVG9rZW4pIHtcbiAgICAgIHRoaXMudG9rZW4gPSBhdXRoVG9rZW47XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5HSVRIVUJfVE9LRU4pIHtcbiAgICAgIHRoaXMudG9rZW4gPSBwcm9jZXNzLmVudi5HSVRIVUJfVE9LRU47XG4gICAgfSBlbHNlIGlmIChyZXF1aXJlQXV0aCkge1xuICAgICAgdGhyb3cgJ1BsZWFzZSBzZXQgR0lUSFVCX1RPS0VOIGluIHlvdXIgZW52aXJvbm1lbnQgdG8gYWNjZXNzIHRoZXNlIGZlYXR1cmVzJztcbiAgICB9XG4gIH1cblxuICBnZXRHaXRIdWIoKSB7XG4gICAgY29uc3QgZ2l0aHViID0gbmV3IEdpdEh1YkFQSSh7XG4gICAgICBwcm90b2NvbDogJ2h0dHBzJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ3VzZXItYWdlbnQnOiAnRWxlY3Ryb24gRm9yZ2UnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgZ2l0aHViLmF1dGhlbnRpY2F0ZSh7XG4gICAgICAgIHR5cGU6ICd0b2tlbicsXG4gICAgICAgIHRva2VuOiB0aGlzLnRva2VuLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBnaXRodWI7XG4gIH1cbn1cbiJdfQ==